(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7248],{16756:function(e,r,t){Promise.resolve().then(t.bind(t,55523))},27648:function(e,r,t){"use strict";t.d(r,{default:function(){return s.a}});var n=t(72972),s=t.n(n)},55523:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return h}});var n=t(57437),s=t(2265),a=t(27648),i=t(5978),o=t(74348),u=t(79820),l=t(12381),d=t(38276),c=t(91230),f=t(69140);async function m(){let{firestore:e}=(0,o.hL)(),r=(0,i.hJ)(e,"rooms"),t=await (0,i.PL)(r);return t.empty?[]:t.docs.map(e=>({...e.data(),id:e.id}))}function h(){let[e,r]=s.useState([]),[t,i]=s.useState(!0);return s.useEffect(()=>{(async function(){try{let e=await m();r(e)}catch(e){console.error("Failed to fetch rooms for availability dashboard:",e)}finally{i(!1)}})()},[]),(0,n.jsxs)("div",{className:"p-4 sm:p-6 bg-shpc-sand min-h-full flex flex-col",children:[(0,n.jsx)("header",{className:"flex flex-wrap items-center justify-between gap-4 mb-6",children:(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"text-3xl font-bold text-shpc-ink",children:"Availability"}),(0,n.jsx)("p",{className:"text-muted-foreground",children:"Select a room to manage its calendar and pricing."})]})}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[t?Array.from({length:3}).map((e,r)=>(0,n.jsxs)(u.Zb,{children:[(0,n.jsxs)(u.Ol,{children:[(0,n.jsx)(f.O,{className:"h-6 w-3/4"}),(0,n.jsx)(f.O,{className:"h-4 w-1/2"})]}),(0,n.jsx)(u.aY,{className:"flex justify-end",children:(0,n.jsx)(f.O,{className:"h-10 w-24"})})]},"skel-".concat(r))):e.map(e=>(0,n.jsxs)(u.Zb,{className:"shadow-soft rounded-2xl flex flex-col",children:[(0,n.jsxs)(u.Ol,{className:"flex-grow",children:[(0,n.jsxs)(u.ll,{className:"flex items-center gap-2",children:[(0,n.jsx)(d.Z,{className:"h-5 w-5 text-muted-foreground"}),e.name]}),(0,n.jsxs)(u.SZ,{children:[e.bedding," Bed / Up to ",e.capacity," guests"]})]}),(0,n.jsx)(u.aY,{children:(0,n.jsx)(l.z,{asChild:!0,className:"w-full",children:(0,n.jsxs)(a.default,{href:"/admin/availability/".concat(e.slug),children:["Manage Calendar ",(0,n.jsx)(c.Z,{className:"ml-2 h-4 w-4"})]})})})]},e.id)),!t&&0===e.length&&(0,n.jsxs)(u.Zb,{className:"md:col-span-2 lg:col-span-3",children:[(0,n.jsxs)(u.Ol,{children:[(0,n.jsx)(u.ll,{children:"No Rooms Found"}),(0,n.jsx)(u.SZ,{children:"Create a room first to manage its availability."})]}),(0,n.jsx)(u.aY,{children:(0,n.jsx)(l.z,{asChild:!0,children:(0,n.jsx)(a.default,{href:"/admin/rooms/new",children:"Create a Room"})})})]})]})]})}},12381:function(e,r,t){"use strict";t.d(r,{d:function(){return u},z:function(){return l}});var n=t(57437),s=t(2265),a=t(98482),i=t(90535),o=t(93448);let u=(0,i.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),l=s.forwardRef((e,r)=>{let{className:t,variant:s,size:i,asChild:l=!1,...d}=e,c=l?a.g7:"button";return(0,n.jsx)(c,{className:(0,o.cn)(u({variant:s,size:i,className:t})),ref:r,...d})});l.displayName="Button"},79820:function(e,r,t){"use strict";t.d(r,{Ol:function(){return o},SZ:function(){return l},Zb:function(){return i},aY:function(){return d},eW:function(){return c},ll:function(){return u}});var n=t(57437),s=t(2265),a=t(93448);let i=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,n.jsx)("div",{ref:r,className:(0,a.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...s})});i.displayName="Card";let o=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,n.jsx)("div",{ref:r,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",t),...s})});o.displayName="CardHeader";let u=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,n.jsx)("div",{ref:r,className:(0,a.cn)("text-2xl font-semibold leading-none tracking-tight",t),...s})});u.displayName="CardTitle";let l=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,n.jsx)("div",{ref:r,className:(0,a.cn)("text-sm text-muted-foreground",t),...s})});l.displayName="CardDescription";let d=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,n.jsx)("div",{ref:r,className:(0,a.cn)("p-6 pt-0",t),...s})});d.displayName="CardContent";let c=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,n.jsx)("div",{ref:r,className:(0,a.cn)("flex items-center p-6 pt-0",t),...s})});c.displayName="CardFooter"},69140:function(e,r,t){"use strict";t.d(r,{O:function(){return a}});var n=t(57437),s=t(93448);function a(e){let{className:r,...t}=e;return(0,n.jsx)("div",{className:(0,s.cn)("animate-pulse rounded-md bg-muted",r),...t})}},6827:function(e,r,t){"use strict";t.d(r,{A:function(){return s},a:function(){return a}});var n=t(63996);let s=()=>{let{user:e,isUserLoading:r,userError:t}=(0,n.f2)();return{user:e,isUserLoading:r,userError:t}},a=()=>{let{auth:e}=(0,n.f2)();return e}},71077:function(e,r,t){"use strict";t.d(r,{s:function(){return n}});let n=function(){let e={};return{on(r,t){var n;e[r]||(e[r]=[]),null===(n=e[r])||void 0===n||n.push(t)},off(r,t){var n;e[r]&&(e[r]=null===(n=e[r])||void 0===n?void 0:n.filter(e=>e!==t))},emit(r,t){var n;e[r]&&(null===(n=e[r])||void 0===n||n.forEach(e=>e(t)))}}}()},74348:function(e,r,t){"use strict";t.d(r,{b$:function(){return d},s5:function(){return l.s},hL:function(){return m},Kx:function(){return c},CU:function(){return o.CU},sx:function(){return o.sx},aF:function(){return f.A}});let n={projectId:"punta-cana-stays",appId:"1:95102335388:web:f8a7004b8a84ce2a22f059",storageBucket:"punta-cana-stays.appspot.com",apiKey:"AIzaSyAhOZfzaFBe0GsXa170eJO4ILJcS5AmV7Q",authDomain:"punta-cana-stays.firebaseapp.com",measurementId:"",messagingSenderId:"95102335388"};var s=t(738),a=t(43301),i=t(5978),o=t(63996),u=t(2265),l=t(71077);class d extends Error{constructor(e){let r=function(e){let r=null;try{let e=(0,a.v0)().currentUser;e&&(r=function(e){var r;if(!e)return null;let t={name:e.displayName,email:e.email,email_verified:e.emailVerified,phone_number:e.phoneNumber,sub:e.uid,firebase:{identities:e.providerData.reduce((e,r)=>(r.providerId&&(e[r.providerId]=[r.uid]),e),{}),sign_in_provider:(null===(r=e.providerData[0])||void 0===r?void 0:r.providerId)||"custom",tenant:e.tenantId}};return{uid:e.uid,token:t}}(e))}catch(e){}return{auth:r,method:e.operation,path:"/databases/(default)/documents/".concat(e.path),resource:e.requestResourceData?{data:e.requestResourceData}:void 0}}(e);super("Missing or insufficient permissions: The following request was denied by Firestore Security Rules:\n".concat(JSON.stringify(r,null,2))),this.name="FirebaseError",this.request=r}}function c(e){let[r,t]=(0,u.useState)(null),[n,s]=(0,u.useState)(!0),[a,c]=(0,u.useState)(null),{firestore:f}=(0,o.f2)();if((0,u.useEffect)(()=>{if(!e||!f){t(null),s(!1),c(null);return}s(!0),c(null);let r=(0,i.cf)(e,e=>{let r=[];for(let t of e.docs)r.push({...t.data(),id:t.id});t(r),c(null),s(!1)},r=>{let n=new d({path:(null==e?void 0:e.path)||"unknown_path",operation:"list"});l.s.emit("permission-error",n),c(n),t(null),s(!1)});return()=>r()},[e,f]),e&&!e.__memo)throw Error("useCollection target query was not properly memoized using useMemoFirebase");return{data:r,isLoading:n,error:a}}var f=t(6827);function m(){let e;e=(0,s.C6)().length?(0,s.Mq)():(0,s.ZF)(n);let r=(0,i.ad)(e),t=(0,a.v0)(e);return{firebaseApp:e,firestore:r,auth:t}}},63996:function(e,r,t){"use strict";t.d(r,{CU:function(){return l},Km:function(){return o},f2:function(){return u},sx:function(){return d}});var n=t(57437),s=t(2265),a=t(43301);let i=(0,s.createContext)(void 0),o=e=>{let{children:r,firebaseApp:t,firestore:o,auth:u}=e,[l,d]=(0,s.useState)({user:null,isUserLoading:!0,userError:null});(0,s.useEffect)(()=>{let e=(0,a.Aj)(u,e=>{d({user:e,isUserLoading:!1,userError:null})},e=>{console.error("FirebaseProvider: onAuthStateChanged error:",e),d({user:null,isUserLoading:!1,userError:e})});return()=>e()},[u]);let c=(0,s.useMemo)(()=>({firebaseApp:t,firestore:o,auth:u,user:l.user,isUserLoading:l.isUserLoading,userError:l.userError}),[t,o,u,l]);return(0,n.jsx)(i.Provider,{value:c,children:r})},u=()=>{let e=(0,s.useContext)(i);if(void 0===e)throw Error("useFirebase must be used within a FirebaseProvider.");return e},l=()=>{let{firestore:e}=u();return e};function d(e,r){let t=(0,s.useMemo)(e,r);return"object"!=typeof t||null===t||(t.__memo=!0),t}},93448:function(e,r,t){"use strict";t.d(r,{cn:function(){return a}});var n=t(61994),s=t(53335);function a(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,s.m6)((0,n.W)(r))}},91230:function(e,r,t){"use strict";t.d(r,{Z:function(){return n}});let n=(0,t(96471).Z)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])},38276:function(e,r,t){"use strict";t.d(r,{Z:function(){return n}});let n=(0,t(96471).Z)("Bed",[["path",{d:"M2 4v16",key:"vw9hq8"}],["path",{d:"M2 8h18a2 2 0 0 1 2 2v10",key:"1dgv2r"}],["path",{d:"M2 17h20",key:"18nfp3"}],["path",{d:"M6 8v9",key:"1yriud"}]])}},function(e){e.O(0,[4728,4358,6137,2972,9242,3301,9221,2971,2117,1744],function(){return e(e.s=16756)}),_N_E=e.O()}]);