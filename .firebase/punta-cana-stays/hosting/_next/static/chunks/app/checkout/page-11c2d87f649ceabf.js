(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[285],{7385:function(e,s,t){Promise.resolve().then(t.bind(t,15063))},15063:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return $}});var a=t(57437),r=t(2265),n=t(99376),l=t(12381),i=t(79820),c=t(40279),d=t(75060),o=t(31593),m=t(60936),u=t(2901),x=t(59121),h=t(13147),f=t(16994),p=t(81475),g=t(5255),j=t(99342),y=t(53459),b=t(5485),v=t(88880),N=t(33145),w=t(23340),P=t(86700),k=t(12749),C=t(46291),S=t(68245),_=t(27648),F=t(93448),E=t(74348),D=t(5978),A=t(56659);let I={puj:{"one-way":35,"round-trip":70}},z=e=>{let{bookingDetails:s,pickupPrice:t,tripType:r,airline:n,flightNumber:l,arrivalDate:c,returnDate:d,returnFlightNumber:x}=e;if(!s)return null;let{rooms:y,dates:b,guests:v,nights:w,totalPrice:P}=s,k=(0,m.D)(b.from),C=(0,m.D)(b.to),S="none"!==r,_=S&&(!n||!l||!c);return(0,a.jsx)("div",{className:"space-y-6 lg:w-[420px] shrink-0",children:(0,a.jsxs)(i.Zb,{className:"bg-white shadow-soft rounded-2xl",children:[(0,a.jsx)(i.Ol,{className:"p-6",children:(0,a.jsx)("h3",{className:"text-2xl font-bold",children:"Your Booking"})}),(0,a.jsxs)(i.aY,{className:"p-6 pt-0 space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("span",{className:"text-muted-foreground flex items-center gap-2",children:[(0,a.jsx)(h.Z,{className:"h-4 w-4"}),"Dates"]}),(0,a.jsxs)("span",{className:"font-semibold text-right",children:[(0,u.WU)(k,"MMM dd, yyyy")," – ",(0,u.WU)(C,"MMM dd, yyyy")]})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("span",{className:"text-muted-foreground flex items-center gap-2",children:[(0,a.jsx)(f.Z,{className:"h-4 w-4"})," Guests"]}),(0,a.jsxs)("span",{className:"font-bold text-black text-base",children:[v," ",1===v?"guest":"guests"]})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("span",{className:"text-muted-foreground flex items-center gap-2",children:[(0,a.jsx)(p.Z,{className:"h-4 w-4"})," Nights"]}),(0,a.jsxs)("span",{className:"font-bold text-black text-base",children:[w," ",1===w?"night":"nights"]})]})]}),(0,a.jsx)(o.Separator,{}),y.map(e=>(0,a.jsx)("div",{className:"space-y-2",children:(0,a.jsxs)("div",{className:"flex gap-4 items-start",children:[(0,a.jsx)(N.default,{src:e.image||"https://picsum.photos/seed/room-placeholder/80/60",alt:e.name,width:80,height:60,className:"rounded-lg object-cover aspect-[4/3]","data-ai-hint":"hotel room"}),(0,a.jsxs)("div",{className:"flex-grow",children:[(0,a.jsx)("p",{className:"font-semibold",children:e.name}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:[e.bedding," bed"]}),(0,a.jsxs)("div",{className:"flex justify-between text-sm mt-1",children:[(0,a.jsxs)("span",{children:["$",e.price.toFixed(2)," \xd7 ",w," ",1===w?"night":"nights"]}),(0,a.jsxs)("span",{className:"font-medium text-foreground",children:["$",(e.price*w).toFixed(2)]})]})]})]})},e.id)),S&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.Separator,{}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h4",{className:"font-semibold text-base",children:"Airport Pickup (PUJ)"}),(0,a.jsxs)("div",{className:"text-sm text-muted-foreground space-y-1",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"w-1/3",children:"Type:"}),(0,a.jsx)("span",{className:"font-medium text-foreground text-right truncate w-2/3",children:"one-way"===r?"From Punta Cana Airport to Sweet Home Punta Cana":"Round Trip"})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{children:"Arrival:"}),(0,a.jsxs)("span",{className:"font-medium text-foreground text-right truncate",children:[c?(0,u.WU)(c,"MMM dd, yyyy"):"—"," • ",n||"—"," • ",l||"—"]})]}),"round-trip"===r&&(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{children:"Departure:"}),(0,a.jsxs)("span",{className:"font-medium text-foreground text-right truncate",children:[d?(0,u.WU)(d,"MMM dd, yyyy"):"—"," • ",x||"—"]})]})]}),(_||"round-trip"===r&&(!x||!d))&&(0,a.jsx)("p",{className:"text-xs text-amber-700 bg-amber-50 p-2 rounded-md",children:"We’ll request missing flight details after booking."})]})]}),(0,a.jsx)(o.Separator,{}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("h4",{className:"font-semibold text-base mb-2",children:"Price Details"}),(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Room Subtotal"}),(0,a.jsxs)("span",{children:["$",P.toFixed(2)]})]}),S&&(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Airport Pickup"}),(0,a.jsxs)("span",{children:["$",t.toFixed(2)]})]}),(0,a.jsxs)("div",{className:"flex justify-between text-sm text-green-600 font-medium pt-1",children:[(0,a.jsxs)("span",{className:"flex items-center gap-1.5",children:[(0,a.jsx)(g.Z,{className:"h-4 w-4"}),"All taxes & fees included"]}),(0,a.jsxs)("span",{className:"flex items-center gap-1.5",children:[(0,a.jsx)(g.Z,{className:"h-4 w-4"}),"No hidden charges."]})]})]}),(0,a.jsx)(o.Separator,{}),(0,a.jsxs)("div",{className:"flex justify-between font-bold text-lg items-baseline",children:[(0,a.jsx)("span",{children:"Total (USD)"}),(0,a.jsxs)("span",{className:"font-mono text-2xl",children:["$",(P+t).toFixed(2)]})]})]}),(0,a.jsx)(i.eW,{className:"p-6 pt-0",children:(0,a.jsxs)("div",{className:"p-4 bg-green-50 text-green-800 rounded-2xl text-sm space-y-2 w-full",children:[(0,a.jsxs)("p",{className:"flex items-start gap-2",children:[(0,a.jsx)(p.Z,{className:"h-4 w-4 mt-0.5 shrink-0"})," Check-in: 3:00 PM • Check-out: 11:00 AM"]}),(0,a.jsxs)("p",{className:"flex items-start gap-2",children:[(0,a.jsx)(j.Z,{className:"h-4 w-4 mt-0.5 shrink-0"})," Free cancellation up to 48h before arrival."]})]})})]})})};function Z(){let e=(0,n.useRouter)(),s=(0,E.CU)(),{user:t}=(0,E.aF)(),{toast:o}=(0,w.pm)(),[m,f]=r.useState(null),[p,g]=r.useState(!0),[j,N]=r.useState(!1),[Z,$]=r.useState(null),[M,O]=r.useState(""),[U,B]=r.useState(""),[R,T]=r.useState(""),[Y,W]=r.useState(""),[J,L]=r.useState(!1),[q,V]=r.useState("none"),[X,H]=r.useState(""),[K,G]=r.useState(""),[Q,ee]=r.useState(),[es,et]=r.useState(),[ea,er]=r.useState(""),[en,el]=r.useState(!1),[ei,ec]=r.useState(!1),[ed,eo]=r.useState(!1),[em,eu]=r.useState(null);r.useEffect(()=>{let e=localStorage.getItem("bookingDetails");if(e)try{f(JSON.parse(e))}catch(e){console.error("Failed to parse booking details:",e)}g(!1)},[]);let ex="none"!==q?I.puj[q]:0,eh=m?m.totalPrice+ex:0,ef=async()=>{var e;if($(null),!M||!U||!R||!J){o({title:"Missing Information",description:"Please fill in your name, email and accept the terms.",variant:"destructive"}),$({message:"Please fill in your name, email and accept the terms."});return}if(!m||!s){o({title:"Error",description:"Booking details are missing or database connection failed. Please start over.",variant:"destructive"}),$({message:"Booking details are missing or DB connection failed."});return}N(!0),eu({type:"room",customer:{name:"".concat(M," ").concat(U),email:R,phone:Y},pricing:{totalUSD:eh,currency:"USD"},dates:{checkIn:m.dates.from,checkOut:m.dates.to},guests:m.guests,room:{name:m.rooms.map(e=>e.name).join(", "),ids:m.rooms.map(e=>e.id)},transfer:"none"!==q?{tripType:q,price:ex,airline:X,flightNumber:K,arrivalDate:Q?(0,u.WU)(Q,"yyyy-MM-dd"):null,returnDate:es?(0,u.WU)(es,"yyyy-MM-dd"):null,returnFlightNumber:ea}:null,status:"Pending Payment",createdAt:(0,D.Bt)(),updatedAt:(0,D.Bt)(),guestUid:null!==(e=null==t?void 0:t.uid)&&void 0!==e?e:null}),eo(!0),N(!1)},ep=async(t,a)=>{if(!em||!s){o({title:"Error",description:"Payment successful, but booking details for finalization are missing.",variant:"destructive"}),$({message:"Payment successful, but booking details for finalization are missing."});return}N(!0);let r={...em,paypalOrderId:t,paypalTransactionId:a,status:"Confirmed",updatedAt:(0,D.Bt)()};try{let t=await (0,D.ET)((0,D.hJ)(s,"reservations"),r);o({title:"Booking Confirmed",description:"Your room booking has been successfully confirmed!",variant:"default"}),localStorage.removeItem("bookingDetails"),e.push("/confirmation?bid=".concat(t.id))}catch(s){console.error("Booking finalization failed:",s);let e=s.message||"Could not finalize booking after payment. Please contact support.";o({title:"Booking Finalization Failed",description:e,variant:"destructive"}),$({message:e,payload:r})}finally{N(!1),eo(!1),eu(null)}};return p?(0,a.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-shpc-sand",children:(0,a.jsx)(y.Z,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):m?(0,a.jsx)("div",{className:"bg-shpc-sand min-h-screen py-12 px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,a.jsxs)(l.z,{variant:"ghost",onClick:()=>e.back(),className:"mb-4",children:[(0,a.jsx)(b.Z,{className:"mr-2 h-4 w-4"}),"Back"]}),(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row gap-8 lg:gap-12 items-start",children:[(0,a.jsxs)("div",{className:"flex-grow flex flex-col space-y-8",children:[(0,a.jsxs)(i.Zb,{className:"shadow-soft rounded-2xl",children:[(0,a.jsx)(i.Ol,{children:(0,a.jsx)(i.ll,{children:"Guest Information"})}),(0,a.jsxs)(i.aY,{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)(d._,{htmlFor:"first-name",children:["First Name",(0,a.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,a.jsx)(c.I,{id:"first-name",placeholder:"John",value:M,onChange:e=>O(e.target.value),required:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)(d._,{htmlFor:"last-name",children:["Last Name",(0,a.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,a.jsx)(c.I,{id:"last-name",placeholder:"Doe",value:U,onChange:e=>B(e.target.value),required:!0})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)(d._,{htmlFor:"email",children:["Email",(0,a.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,a.jsx)(c.I,{id:"email",type:"email",placeholder:"john@example.com",value:R,onChange:e=>T(e.target.value),required:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d._,{htmlFor:"phone",children:"Phone"}),(0,a.jsx)(c.I,{id:"phone",type:"tel",placeholder:"+1 (809) 123-4567",value:Y,onChange:e=>W(e.target.value)})]})]}),(0,a.jsxs)("div",{className:"flex items-start space-x-3 pt-4",children:[(0,a.jsx)(S.X,{id:"terms",checked:J,onCheckedChange:e=>L(e)}),(0,a.jsxs)(d._,{htmlFor:"terms",className:"text-sm text-muted-foreground font-normal",children:["I confirm that I have read the ",(0,a.jsx)(_.default,{href:"/privacy",target:"_blank",className:"underline hover:text-primary",children:"Privacy Statement"}),", the ",(0,a.jsx)(_.default,{href:"/rules",target:"_blank",className:"underline hover:text-primary",children:"Rules & Restrictions"}),", and the ",(0,a.jsx)(_.default,{href:"/terms",target:"_blank",className:"underline hover:text-primary",children:"Terms of Service"}),"."]})]})]})]}),(0,a.jsxs)(i.Zb,{className:"shadow-soft rounded-2xl",children:[(0,a.jsx)(i.Ol,{children:(0,a.jsx)(i.ll,{className:"flex items-center gap-3",children:(0,a.jsx)("span",{children:"✈️ Airport Pickup (PUJ Only)"})})}),(0,a.jsx)(i.aY,{className:"space-y-4",children:m.guests>2?(0,a.jsxs)("div",{className:"p-4 bg-blue-50 text-blue-800 rounded-2xl border border-blue-200",children:[(0,a.jsx)("p",{className:"font-semibold",children:"Have 3 or more guests?"}),(0,a.jsx)("p",{className:"text-sm mt-1",children:"Our standard transfer accommodates up to 2 passengers. For larger groups, please contact us directly to arrange a suitable vehicle."}),(0,a.jsx)(l.z,{asChild:!0,className:"mt-3",children:(0,a.jsxs)("a",{href:"https://wa.me/18095105465",target:"_blank",rel:"noopener noreferrer",children:[(0,a.jsx)(v.Z,{className:"mr-2 h-4 w-4"}),"Contact Us on WhatsApp"]})})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(P.E,{value:q,onValueChange:e=>V(e),className:"grid grid-cols-3 gap-2",children:[(0,a.jsxs)(d._,{htmlFor:"none",className:(0,F.cn)("flex flex-col items-center justify-center text-center py-2 px-3 border rounded-lg cursor-pointer transition-colors h-auto","none"===q&&"bg-shpc-yellow border-shpc-yellow"),children:[(0,a.jsx)(P.m,{value:"none",id:"none",className:"sr-only"}),(0,a.jsx)("span",{className:"font-medium text-sm",children:"No Pickup"})]}),(0,a.jsxs)(d._,{htmlFor:"one-way",className:(0,F.cn)("flex flex-col items-center justify-center text-center py-2 px-3 border rounded-lg cursor-pointer transition-colors h-auto","one-way"===q&&"bg-shpc-yellow border-shpc-yellow"),children:[(0,a.jsx)(P.m,{value:"one-way",id:"one-way",className:"sr-only"}),(0,a.jsx)("span",{className:"font-medium text-sm",children:"One-way"}),(0,a.jsxs)("span",{className:"font-semibold text-base mt-1",children:["$",I.puj["one-way"]]})]}),(0,a.jsxs)(d._,{htmlFor:"round-trip",className:(0,F.cn)("flex flex-col items-center justify-center text-center py-2 px-3 border rounded-lg cursor-pointer transition-colors h-auto","round-trip"===q&&"bg-shpc-yellow border-shpc-yellow"),children:[(0,a.jsx)(P.m,{value:"round-trip",id:"round-trip",className:"sr-only"}),(0,a.jsx)("span",{className:"font-medium text-sm",children:"Round Trip"}),(0,a.jsxs)("span",{className:"font-semibold text-base mt-1",children:["$",I.puj["round-trip"]]})]})]}),"none"!==q&&(0,a.jsxs)("div",{className:"space-y-4 pt-4 border-t mt-4",children:[(0,a.jsx)("h4",{className:"font-medium",children:"Flight Details"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d._,{htmlFor:"airline",children:"Airline"}),(0,a.jsx)(c.I,{id:"airline",placeholder:"e.g., American",value:X,onChange:e=>H(e.target.value)})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d._,{htmlFor:"flight-number",children:"Arrival Flight"}),(0,a.jsx)(c.I,{id:"flight-number",placeholder:"e.g., AA123",value:K,onChange:e=>G(e.target.value)})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d._,{htmlFor:"arrival-date",children:"Arrival Date"}),(0,a.jsxs)(k.J2,{open:en,onOpenChange:el,children:[(0,a.jsx)(k.xo,{asChild:!0,children:(0,a.jsxs)(l.z,{variant:"outline",className:"w-full justify-start text-left font-normal",children:[(0,a.jsx)(h.Z,{className:"mr-2 h-4 w-4"}),Q?(0,u.WU)(Q,"PPP"):(0,a.jsx)("span",{children:"Select date"})]})}),(0,a.jsx)(k.yk,{className:"w-auto p-0",children:(0,a.jsx)(C.f,{mode:"single",selected:Q,onSelect:e=>{ee(e),el(!1)},initialFocus:!0,disabled:{before:(0,x.E)(new Date,1)}})})]})]})]}),"round-trip"===q&&(0,a.jsxs)("div",{className:"space-y-4 pt-4 border-t mt-4",children:[(0,a.jsx)("h4",{className:"font-medium",children:"Return Flight (Optional)"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d._,{htmlFor:"return-flight-number",children:"Return Flight"}),(0,a.jsx)(c.I,{id:"return-flight-number",placeholder:"e.g., AA456",value:ea,onChange:e=>er(e.target.value)})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d._,{htmlFor:"return-date",children:"Return Date"}),(0,a.jsxs)(k.J2,{open:ei,onOpenChange:ec,children:[(0,a.jsx)(k.xo,{asChild:!0,children:(0,a.jsxs)(l.z,{variant:"outline",className:"w-full justify-start text-left font-normal",children:[(0,a.jsx)(h.Z,{className:"mr-2 h-4 w-4"}),es?(0,u.WU)(es,"PPP"):(0,a.jsx)("span",{children:"Select date"})]})}),(0,a.jsx)(k.yk,{className:"w-auto p-0",children:(0,a.jsx)(C.f,{mode:"single",selected:es,onSelect:e=>{et(e),ec(!1)},initialFocus:!0,disabled:{before:(0,x.E)(new Date,1)}})})]})]})]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"You can provide return flight details later via your confirmation email or WhatsApp."})]})]})]})})]}),ed?(0,a.jsxs)(a.Fragment,{children:[eh>0&&em&&(0,a.jsx)(A.l,{amount:eh.toFixed(2),currency:"USD",onPaymentSuccess:ep,onPaymentError:e=>{console.error("PayPal Payment Error:",e),o({title:"Payment Error",description:"There was an issue processing your payment. Please try again or contact support.",variant:"destructive"}),eo(!1),eu(null),N(!1)},onPaymentCancel:()=>{o({title:"Payment Cancelled",description:"You have cancelled the PayPal payment process.",variant:"default"}),eo(!1),eu(null),N(!1)}}),0===eh&&(0,a.jsx)(l.z,{size:"lg",className:"w-full h-12",onClick:ep,disabled:j,children:j?(0,a.jsx)(y.Z,{className:"animate-spin"}):"Confirm Free Booking"}),(0,a.jsx)(l.z,{variant:"outline",className:"w-full h-12 mt-2",onClick:()=>eo(!1),disabled:j,children:"Cancel Payment"})]}):(0,a.jsx)(l.z,{size:"lg",className:"w-full h-12",onClick:ef,disabled:j,children:j?(0,a.jsx)(y.Z,{className:"animate-spin"}):"Proceed to Payment"}),Z&&(0,a.jsxs)(i.Zb,{className:"mt-4 bg-destructive/10 border-destructive",children:[(0,a.jsxs)(i.Ol,{children:[(0,a.jsx)(i.ll,{className:"text-destructive text-lg",children:"Booking Failed"}),(0,a.jsxs)(i.SZ,{className:"text-destructive/80",children:["The following error occurred: ",Z.message]})]}),Z.payload&&(0,a.jsxs)(i.aY,{children:[(0,a.jsx)("p",{className:"text-sm font-semibold mb-2",children:"Data Sent to Server:"}),(0,a.jsx)("pre",{className:"text-xs whitespace-pre-wrap font-mono bg-background/50 p-2 rounded-md",children:(0,a.jsx)("code",{children:JSON.stringify(Z.payload,null,2)})})]})]})]}),(0,a.jsx)("div",{className:"lg:sticky top-24",children:(0,a.jsx)(z,{bookingDetails:m,pickupPrice:ex,tripType:q,airline:X,flightNumber:K,arrivalDate:Q,returnDate:es,returnFlightNumber:ea})})]})]})}):(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-screen bg-shpc-sand text-center p-4",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold mb-2",children:"Booking session expired"}),(0,a.jsx)("p",{className:"text-muted-foreground mb-4",children:"Your booking details were not found. Please start a new search."}),(0,a.jsxs)(l.z,{onClick:()=>e.push("/"),children:[(0,a.jsx)(b.Z,{className:"mr-2 h-4 w-4"})," Back to Home"]})]})}function $(){let[e,s]=r.useState(!1);return(r.useEffect(()=>{s(!0)},[]),e)?(0,a.jsx)(Z,{}):(0,a.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-shpc-sand",children:(0,a.jsx)(y.Z,{className:"h-8 w-8 animate-spin text-muted-foreground"})})}},56659:function(e,s,t){"use strict";t.d(s,{l:function(){return i}});var a=t(57437);t(2265);var r=t(61542),n=t(23340),l=t(11392);function i(e){let{purchaseContext:s,currency:t,onPaymentSuccess:i,onPaymentError:c}=e,{toast:d}=(0,n.pm)(),o="AXq7eJpeSOd3qbCEX_88yc9TFm8-M3CEd7JUGoKH7KJVH9Z9e0IOeqAsamYl6m6VyemOvi0rXKQ2xAFu";return o?(0,a.jsx)(r.Vv,{options:{clientId:o,currency:t,intent:"capture"},children:(0,a.jsx)(r.ch,{style:{layout:"vertical"},createOrder:async()=>{try{d({title:"Connecting to PayPal..."});let e=await (0,l.Le)(s);if(!e||!e.id)throw Error("Server did not return a valid PayPal order ID.");return e.id}catch(e){throw console.error("Fatal Error creating PayPal order:",e),d({title:"Server Error",description:"Could not initiate payment. The server failed to create a PayPal order.",variant:"destructive"}),c(e),Error("Server failed to create PayPal order.")}},onApprove:async e=>{try{var s,t,a,r,n;let c=await (0,l.Cz)(e.orderID);if(!c.ok||!c.data)throw Error(c.error||"Server failed to capture the payment.");let d=c.data;if("COMPLETED"!==d.status)throw Error("Payment not completed. PayPal status: ".concat(d.status));let o=null===(n=d.purchase_units)||void 0===n?void 0:null===(r=n[0])||void 0===r?void 0:null===(a=r.payments)||void 0===a?void 0:null===(t=a.captures)||void 0===t?void 0:null===(s=t[0])||void 0===s?void 0:s.id;if(!o)throw Error("Could not find a valid transaction ID in the PayPal response.");await i(e.orderID,o)}catch(e){console.error("Error capturing payment:",e),d({title:"Payment Failed",description:e.message,variant:"destructive"}),c(e)}},onCancel:()=>{d({title:"Payment Cancelled",description:"You have cancelled the payment process."}),c(Error("Payment cancelled by user."))},onError:e=>{console.error("PayPal Buttons Script Error:",e),d({title:"PayPal Error",description:"An unexpected error occurred with PayPal. Please try refreshing the page.",variant:"destructive"}),c(e)}})}):(console.error("CRITICAL: PayPal Client ID is not defined. Check NEXT_PUBLIC_PAYPAL_CLIENT_ID."),(0,a.jsx)("div",{className:"text-red-500 font-semibold p-4 bg-red-100 rounded-md",children:"Error: Payment system is not configured."}))}},46291:function(e,s,t){"use strict";t.d(s,{f:function(){return d}});var a=t(57437);t(2265);var r=t(82521),n=t(76848),l=t(91687),i=t(93448),c=t(12381);function d(e){let{className:s,classNames:t,showOutsideDays:d=!0,...o}=e;return(0,a.jsx)(l._W,{showOutsideDays:d,className:(0,i.cn)("p-3",s),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:(0,i.cn)((0,c.d)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:(0,i.cn)((0,c.d)({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...t},components:{IconLeft:e=>{let{className:s,...t}=e;return(0,a.jsx)(r.Z,{className:(0,i.cn)("h-4 w-4",s),...t})},IconRight:e=>{let{className:s,...t}=e;return(0,a.jsx)(n.Z,{className:(0,i.cn)("h-4 w-4",s),...t})}},...o})}d.displayName="Calendar"},68245:function(e,s,t){"use strict";t.d(s,{X:function(){return c}});var a=t(57437),r=t(2265),n=t(9270),l=t(59559),i=t(93448);let c=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(n.fC,{ref:s,className:(0,i.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...r,children:(0,a.jsx)(n.z$,{className:(0,i.cn)("flex items-center justify-center text-current"),children:(0,a.jsx)(l.Z,{className:"h-4 w-4"})})})});c.displayName=n.fC.displayName},12749:function(e,s,t){"use strict";t.d(s,{J2:function(){return i},xo:function(){return c},yk:function(){return d}});var a=t(57437),r=t(2265),n=t(51777),l=t(93448);let i=n.fC,c=n.xz,d=r.forwardRef((e,s)=>{let{className:t,align:r="center",sideOffset:i=4,...c}=e;return(0,a.jsx)(n.h_,{children:(0,a.jsx)(n.VY,{ref:s,align:r,sideOffset:i,className:(0,l.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...c})})});d.displayName=n.VY.displayName},86700:function(e,s,t){"use strict";t.d(s,{E:function(){return c},m:function(){return d}});var a=t(57437),r=t(2265),n=t(42325),l=t(78084),i=t(93448);let c=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(n.fC,{className:(0,i.cn)("grid gap-2",t),...r,ref:s})});c.displayName=n.fC.displayName;let d=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(n.ck,{ref:s,className:(0,i.cn)("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),...r,children:(0,a.jsx)(n.z$,{className:"flex items-center justify-center",children:(0,a.jsx)(l.Z,{className:"h-2.5 w-2.5 fill-current text-current"})})})});d.displayName=n.ck.displayName},31593:function(e,s,t){"use strict";t.d(s,{Separator:function(){return i}});var a=t(57437),r=t(2265),n=t(55156),l=t(93448);let i=r.forwardRef((e,s)=>{let{className:t,orientation:r="horizontal",decorative:i=!0,...c}=e;return(0,a.jsx)(n.f,{ref:s,decorative:i,orientation:r,className:(0,l.cn)("shrink-0 bg-border","horizontal"===r?"h-[1px] w-full":"h-full w-[1px]",t),...c})});i.displayName=n.f.displayName},11392:function(e,s,t){"use strict";t.d(s,{A4:function(){return i},Bg:function(){return x},Cz:function(){return l},IF:function(){return o},Le:function(){return n},Me:function(){return r},QP:function(){return d},Qv:function(){return m},jK:function(){return c},vR:function(){return u}}),t(83079);var a=t(12119),r=(0,a.$)("34f613dcd8a769c0a428b32fb8da22ba767ce291");(0,a.$)("2cf2f393d0c0c69f84117ab20f9869dcdac9e3d8"),(0,a.$)("88768efe9d33bf85b3c109d50b4011225e26b191");var n=(0,a.$)("d29eddafaa3a8b453e73607cf088fa15bb53998d"),l=(0,a.$)("87da0d4bd14e9b7c7f04801bafe1f8eb97281924"),i=(0,a.$)("f622981b8d43b5d2ad4037c091389fa0bc562934"),c=(0,a.$)("7fc4ae09103acdac191133951d93ae15c18c1ec7");(0,a.$)("ffb2fe8e7f90af73184fac3b7b45808bf5ea4693"),(0,a.$)("c72088e54de4dc20b282f1dd4d58253ccad83a1f"),(0,a.$)("91cef4120dd16264668d7fe5682e95d1c56e8213");var d=(0,a.$)("5651c5bc8e5d336094dd4ca35592136fb8dc24a0"),o=(0,a.$)("929b71643b317b5dd25bba3a4d506637ee5a7a52"),m=(0,a.$)("f4be386b9efdd6eaeee67b2c2c6d49341c07a987");(0,a.$)("5cbce382149ca89cee6a8de9cced76a09a4078e8");var u=(0,a.$)("ebce230bb4fc0fbb65f02583e2e9a0cb04561056");(0,a.$)("14e969e0bc546fe04b5cfc542ca8883cb7ca3f06");var x=(0,a.$)("0b012b2cb6b84d017fe76c8ce875caed3cd4cd45")}},function(e){e.O(0,[4728,4358,6137,2972,5878,9242,9666,3301,2901,9221,2778,6008,4039,2147,1056,5680,268,2971,2117,1744],function(){return e(e.s=7385)}),_N_E=e.O()}]);